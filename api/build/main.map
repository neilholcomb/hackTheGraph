{"version":3,"sources":["webpack:///webpack/bootstrap f3bd4ec940009e8b1445","webpack:///./src/index.js","webpack:///external \"koa\"","webpack:///external \"koa-router\"","webpack:///external \"@koa/cors\"","webpack:///./src/commitScraper.js","webpack:///external \"puppeteer\"","webpack:///external \"os\""],"names":["app","router","use","cors","get","ctx","body","response","commitScraper","params","userId","status","error","routes","allowedMethods","listen","console","log","username","commitData","currentYear","Date","getFullYear","browser","puppeteer","launch","page","newPage","goto","headers","close","contributionYears","$$","years","Array","length","keys","year","workingYear","data","evaluate","document","querySelectorAll","map","day","count","dataset","date","forEach","key","split","join","githubCount","hackCount"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap f3bd4ec940009e8b1445","import Koa from 'koa'\nimport Router from 'koa-router'\nimport cors from '@koa/cors'\nimport commitScraper from './commitScraper'\n\nconst app = new Koa()\nconst router = new Router()\n\napp.use(cors())\n\nrouter.get('/', async ctx => {\n  ctx.body = `Welcome to the hack the graph API`\n})\n\nrouter.get('/commits/:userId', async ctx => {\n  const response = await commitScraper(ctx.params.userId)\n\n  if (!response) {\n    ctx.status = 404\n    ctx.body = {\n      error: `${ctx.params.userId} Not found on GitHub`\n    }\n  }\n\n  ctx.body = response\n})\n\napp.use(router.routes()).use(router.allowedMethods())\n\napp.listen(2000, () => {\n  console.log('Open http://localhost:2000')\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","module.exports = require(\"koa\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa\"\n// module id = 2\n// module chunks = 0","module.exports = require(\"koa-router\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-router\"\n// module id = 3\n// module chunks = 0","module.exports = require(\"@koa/cors\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"@koa/cors\"\n// module id = 4\n// module chunks = 0","import puppeteer from 'puppeteer'\nimport { userInfo } from 'os'\n\nexport default async function commitScraper(username) {\n  let commitData = {}\n  const currentYear = new Date().getFullYear()\n\n  // const browser = await puppeteer.launch({ headless: false })\n  const browser = await puppeteer.launch()\n  const page = await browser.newPage()\n\n  const response = await page.goto(`https://github.com/${username}`)\n\n  if (response.headers().status === '404 Not Found') {\n    await browser.close()\n    return false\n  }\n\n  //get our possible years of contribution\n  let contributionYears = await page.$$('.profile-timeline-year-list li a')\n\n  let years = [...Array(contributionYears.length).keys()]\n  //read the graph and extract its data\n\n  for (let year of years) {\n    let workingYear = currentYear - year\n    await page.goto(\n      `https://github.com/users/${username}/contributions?to=${workingYear}-01-01`\n    )\n    let data = await page.evaluate(() =>\n      [...document.querySelectorAll('rect.day')].map(day => ({\n        count: day.dataset.count,\n        date: day.dataset.date\n      }))\n    )\n    data.forEach(day => {\n      const key = day.date.split('-').join('')\n      commitData[key] = {\n        githubCount: +day.count,\n        hackCount: 0\n      }\n    })\n  }\n  await browser.close()\n\n  return commitData\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/commitScraper.js","module.exports = require(\"puppeteer\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"puppeteer\"\n// module id = 6\n// module chunks = 0","module.exports = require(\"os\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"os\"\n// module id = 7\n// module chunks = 0"],"sourceRoot":""}